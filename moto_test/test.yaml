setup:
    S3:
      - bucketName: dip-sfg-integration-bucket
        files:
        - localFile: moto_test/test/input/product_config.xml
          s3FileName: inbound/producteso-au/product_config.xml
        - localFile: moto_test/test/input/site_lookup.json
          s3FileName: inbound/producteso-au/site_lookup.json
      - bucketName: static_bucket
        files:
        - localFile: moto_test/test/input/lookup.csv
          s3FileName: mock/input/lookup.csv
    SQS:
        - Name:  bp.dip.demo.fifo
    SNS:
        - Name: bpDipDemo_sns.fifo
        # Need to improve for local secondary indexes
    DynamoDB:
      - Name: dynamodb_table_name
      - AttributeDefinitions:
          - AttributeName: 'source_sys_name'
            AttributeType: 'S'
      - KeySchema:
          # Code for range
          - AttributeName: 'source_sys_name'
            KeyType: 'HASH'
      # Code for below
      - InitialLoad:
          - SourceType: 'local'
            localFile: mock/input/lookup.csv
      - GlobalSecondaryIndexes:
          - IndexName: ""
            KeySchema:
              - AttributeName: "gsi_region_partition_key"
                KeyType: HASH
              - AttributeName: "gsi_region_sort_key"
                KeyType: RANGE
validate:
    - global:
        - SNS:
          messageAttributes:
            - name: market
            - type: String
            - value: GB
    - test:
      - name: 'validate_dc_event'
      - S3:
        - name: dip-sfg-integration-bucket
        - file:
          - localFile: test/output/product_config.xml
            s3FileName: inbound/producteso-au/product_config.xml
      - SNS:
          - Name: bp.dip.demo_sns.fifo
          - records:
            - body:
                payload: "{'key': 'name', 'bucket': s3_bucket_name}"
                messageDeduplicationId: 3321-2221-3321-3211
                messageGroupId: 'GB:19'
            - body:
                payload: "{'key': 'name', 'bucket': s3_bucket_name}"
                messageDeduplicationId: 3321-2221-3321-3211
                messageGroupId: 'GB:19'

    - test:
      - name: 'invalid_validate_dc_event'
      - S3:
        - name: dip-sfg-integration-bucket
        - file:
          - localFile: test/output/product_config.xml
            s3FileName: inbound/producteso-au/product_config.xml
      - SNS:
          - Name: bp.dip.demo_sns.fifo
          - records:
            - body:
                payload: "{'key': 'name', 'bucket': s3_bucket_name}"
                messageDeduplicationId: 3321-2221-3321-3211
                messageGroupId: 'GB:19'
            - body:
                payload: "{'key': 'name', 'bucket': s3_bucket_name}"
                messageDeduplicationId: 3321-2221-3321-3211
                messageGroupId: 'GB:19'